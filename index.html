<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>DIIM Transfer ‚Äì Agregar a Contactos</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#000000;
  --card:#0a0a0a;
  --text:#e5e7eb;
  --muted:#9ca3af;
  --accent:#00c3ff;
  --accent-2:#00f7ff;
  --ring: rgba(0,195,255,.35);
}
*{box-sizing:border-box}
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow-x: hidden;
}
body {
  display: flex;
  justify-content: center;
  align-items: center;
  background: var(--bg);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  color: var(--text);
}
.card {
  max-width: 640px;
  width: 100%;
  max-height: 100vh;
  overflow-y: auto;
  padding: 28px 16px 32px 16px;
  text-align: center;
  background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
  border: 1px solid rgba(255,255,255,0.08);
  backdrop-filter: blur(6px);
  border-radius: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,.35);
  position: relative;
}
.avatar{
  width:96px; height:96px; border-radius:50%; overflow:hidden;
  margin:0 auto 18px auto;
}
.avatar img{width:100%; height:auto; object-fit:cover;}
.companyLogo{
  width: 140px; height: 140px;
  margin: 0 auto 18px auto;
}
.companyLogo img{
  width: 100%; height: auto;
  object-fit: contain;
  border-radius: 16px;
}
h1{font-size:1.5rem; margin:0 0 4px 0;}
.role{color:var(--muted); margin:0 0 12px 0;}
.meta{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  margin:16px 0 26px 0;
  color:var(--muted);
  font-size:.95rem;
  justify-content:center;
}
.meta span{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:6px 10px;
  border:1px dashed rgba(255,255,255,.12);
  border-radius:999px;
  word-break: break-word;
}
.meta a{color:var(--text); text-decoration:none; transition:.2s;}
.meta a:hover{text-decoration:underline;}
.btn{
  display:block;
  margin: 0 auto 12px auto;
  appearance:none; border:none; cursor:pointer; font-weight:700; font-size:1rem;
  padding:14px 18px; border-radius:14px; transition:.25s ease;
  background:linear-gradient(135deg, var(--accent), var(--accent-2)); color:#052e16;
  box-shadow:0 8px 30px var(--ring);
}
.btn:hover{ transform: translateY(-1px); box-shadow:0 12px 36px var(--ring); }
.btn:active{ transform: translateY(0); }
.small{
  font-size:.92rem; color:var(--muted); margin-top:4px;
  text-align:center;
}

.carousel-arrow {
  position: absolute;
   display: none !important;
  top: 50%;
  transform: translateY(-50%);
  background: rgba(0,0,0,0.4);
  border: 1px solid rgba(255,255,255,0.1);
  color: var(--text);
  font-size: 1.5rem;
  padding: 8px 12px;
  border-radius: 50%;
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  transition: background 0.2s, transform 0.2s, opacity 0.2s;
  z-index: 10;
}
#prevContact { left: 12px; }
#nextContact { right: 12px; }
.carousel-arrow:hover { background: rgba(255,255,255,0.1); transform: scale(1.1); }

#carouselIndicators{
  position: relative;
  display: flex;
  justify-content: center;
  gap: 8px;
  margin-top: 16px;
}
.indicator-dot {
  width: 10px; height: 10px;
  background: rgba(255,255,255,0.3);
  border-radius: 50%;
  transition: background 0.3s, transform 0.3s;
}
.indicator-dot.active {
  background: #fff;
  transform: scale(1.3);
}

.actionSection {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  margin-top: 16px;
}

.card, .actionSection, .btn, .small {
  box-sizing: border-box;
}

@media (max-width: 480px) {
  .card { width: calc(100vw - 16px); max-height: 100vh; }
  .btn, .small { width: 100%; }
  .actionSection { padding: 0 8px; }
  #prevContact { left: 8px; }
  #nextContact { right: 8px; }
}
</style>
</head>
<body>

<main class="card" role="main">
  <div class="companyLogo">
    <img id="companyLogo" src="" alt="Logo de la empresa" />
  </div>

  <div class="avatar">
    <img id="contactAvatar" src="" alt="Contacto" />
  </div>

  <h1 id="fullName"></h1>
  <p class="role" id="title"></p>

  <div class="meta">
    <span id="phoneTag"></span>
    <span id="emailTag"></span>
    <span id="siteTag"></span>
    <span id="mapTag"></span>
  </div>

<div class="actionSection">
  <button class="btn" id="downloadBtn">Agregar a contactos (.vcf)</button>
  <p class="small">Abre el archivo .vcf en tu tel√©fono para guardarlo en tu agenda.</p>
</div>

  <button class="carousel-arrow" id="prevContact">‚óÄ</button>
  <button class="carousel-arrow" id="nextContact">‚ñ∂</button>

  <div id="carouselIndicators"></div>
</main>

<script>
const contacts = [
  {firstName:"Rene", lastName:"Pe√±a Esparza", fullName:"Rene Pe√±a Esparza", title:"Gerente de ventas", org:"DIIM Transfer", phone:"+52 614 119 5709", email:"rene.pena@diimtransfer.com", url:"https://diimtransfer.com", city:"Chihuahua", country:"M√©xico", avatar:"diimtransfer.png", logo:"diimtransfer.png", map:"https://maps.app.goo.gl/mxiugspZAcZsfufWA"}
];

let currentIndex = 0;
function esc(s){ return String(s||"").replace(/,/g,'\\,').replace(/;/g,'\\;').replace(/\n/g,'\\n'); }
function buildVCard(c){
  const lines = [
    'BEGIN:VCARD','VERSION:3.0',
    `N:${esc(c.lastName)};${esc(c.firstName)};;;`,
    `FN:${esc(c.fullName)}`,
    c.title?`TITLE:${esc(c.title)}`:null,
    c.org?`ORG:${esc(c.org)}`:null,
    c.phone?`TEL;TYPE=CELL,VOICE:${esc(c.phone)}`:null,
    c.email?`EMAIL;TYPE=INTERNET:${esc(c.email)}`:null,
    c.url?`URL:${esc(c.url)}`:null,
    c.city||c.country?`ADR;TYPE=WORK:;;;${esc(c.city)};;${esc(c.country)}`:null,
    'END:VCARD'
  ].filter(Boolean);
  return lines.join('\r\n');
}
function triggerDownload(filename, text){
  const blob = new Blob([text], { type: 'text/vcard;charset=utf-8' });
  const url  = URL.createObjectURL(blob);
  const a    = document.createElement('a');
  a.href = url;
  a.download = filename;
  document.body.appendChild(a);
  a.click();
  a.remove();
  URL.revokeObjectURL(url);
}

const indicatorsContainer = document.getElementById('carouselIndicators');
contacts.forEach((_, i) => {
  const dot = document.createElement('div');
  dot.classList.add('indicator-dot');
  if(i===currentIndex) dot.classList.add('active');
  indicatorsContainer.appendChild(dot);
});
function updateIndicators(){
  const dots = indicatorsContainer.children;
  for(let i=0;i<dots.length;i++){
    dots[i].classList.toggle('active', i===currentIndex);
  }
}

function showContact(index){
  const c = contacts[index];
  document.getElementById('contactAvatar').src = c.avatar;
  document.getElementById('fullName').textContent = c.fullName;
  document.getElementById('title').textContent = c.title||'';
  document.getElementById('phoneTag').textContent = "üìû "+(c.phone||'');
  document.getElementById('emailTag').textContent = "‚úâÔ∏è "+(c.email||'');
  document.getElementById('siteTag').innerHTML = c.url?`üåê <a href="${c.url}" target="_blank" rel="noopener">${c.url.replace(/^https?:\/\//,'')}</a>`:'';
  document.getElementById('mapTag').innerHTML = c.map?`<a href="${c.map}" target="_blank" rel="noopener">üìç Direcci√≥n</a>`:'';
  document.getElementById('companyLogo').src = c.logo||'';
  updateIndicators();
}

document.getElementById('downloadBtn').addEventListener('click', ()=>{
  const vcf = buildVCard(contacts[currentIndex]);
  const fileName = `${contacts[currentIndex].fullName.replace(/\s+/g,'_')}.vcf`;
  triggerDownload(fileName, vcf);
});

document.getElementById('prevContact').addEventListener('click', ()=>{
  currentIndex = (currentIndex - 1 + contacts.length) % contacts.length;
  showContact(currentIndex);
});
document.getElementById('nextContact').addEventListener('click', ()=>{
  currentIndex = (currentIndex + 1) % contacts.length;
  showContact(currentIndex);
});

// Swipe / arrastre
let startX=0, endX=0;
const card=document.querySelector('.card');
card.addEventListener('pointerdown', e=>startX=e.clientX);
card.addEventListener('pointerup', e=>{ endX=e.clientX; handleSwipe(); });
card.addEventListener('touchstart', e=>startX=e.touches[0].clientX);
card.addEventListener('touchend', e=>{ endX=e.changedTouches[0].clientX; handleSwipe(); });

function handleSwipe(){
  const diff=endX-startX;
  if(Math.abs(diff)>50){
    if(diff<0) currentIndex=(currentIndex+1)%contacts.length;
    else currentIndex=(currentIndex-1+contacts.length)%contacts.length;
    showContact(currentIndex);
  }
}

showContact(currentIndex);
</script>
</body>
</html>

